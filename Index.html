<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terabox Video Streamer</title>
</head>
<body>
  <h1>Stream Terabox Video</h1>
  <form id="terabox-form">
    <label for="terabox-url">Enter Terabox Link:</label>
    <input type="text" id="terabox-url" name="terabox-url" required>
    <button type="submit">Stream Video</button>
  </form>

  <div id="video-container" style="margin-top: 20px;">
    <!-- Video and thumbnail will be inserted here -->
  </div>

  <script>
    document.getElementById('terabox-form').addEventListener('submit', function(event) {
      event.preventDefault();
      const url = document.getElementById('terabox-url').value;
      fetchVideoData(url);
    });

    async function fetchVideoData(url) {
      try {
        const apiUrl = `https://teraboxvideodownloader.nepcoderdevs.workers.dev/?url=${encodeURIComponent(url)}`;
        const response = await fetch(apiUrl);
        const data = await response.json();

        if (data.response && data.response.length > 0) {
          const videoData = data.response[0];
          displayVideo(videoData);
        } else {
          alert('No video data found.');
        }
      } catch (error) {
        console.error('Error fetching video data:', error);
        alert('Failed to fetch video data.');
      }
    }

    function displayVideo(videoData) {
      const videoContainer = document.getElementById('video-container');
      videoContainer.innerHTML = `
        <h2>${videoData.title}</h2>
        <img src="${videoData.thumbnail}" alt="Thumbnail" style="max-width: 100%; height: auto;">
        <div>
          <h3>Available Resolutions:</h3>
          <a href="${videoData.resolutions['Fast Download']}" target="_blank">Fast Download</a><br>
          <a href="${videoData.resolutions['HD Video']}" target="_blank">HD Video</a>
        </div>
        <video controls style="width: 100%; margin-top: 20px;">
          <source src="${videoData.resolutions['HD Video']}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      `;
    }
  </script>
</body>
</html>
